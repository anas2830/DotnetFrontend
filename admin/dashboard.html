<!DOCTYPE html>
<html>
<head>
    <title>Admin Dashboard</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background: #f5f6fa;
        }
        .sidebar {
            height: 100vh;
            background: #0d6efd;
            color: #fff;
        }
        .sidebar a {
            color: #fff;
            text-decoration: none;
            padding: 12px 15px;
            display: block;
        }
        .sidebar a:hover,
        .sidebar a.active {
            background: rgba(255,255,255,0.2);
        }
        .card-stat {
            border: none;
            box-shadow: 0 0 10px rgba(0,0,0,0.08);
        }
    </style>
</head>

<body>

<div class="container-fluid">
    <div class="row">

        <!-- Sidebar -->
        <div class="col-md-2 sidebar p-0">
            <h5 class="text-center py-3 border-bottom">Admin Panel</h5>

            <a href="/admin/dashboard.html" class="active" onclick="showSection('dashboard')">Dashboard</a>
            <a href="/admin/users-list.html" onclick="showSection('allUsers')">Users List</a>
            <a href="/admin/exams-list.html" onclick="showSection('allExams')">Exams List</a>
            <a href="/admin/questions-list.html" onclick="showSection('allQuestions')">Questions List</a>
            <a href="#" onclick="logout()">Logout</a>
        </div>

        <!-- Main Content -->
        <div class="col-md-10 p-4">

            <!-- Dashboard -->
            <div id="dashboard">
                <h4 class="mb-4">Dashboard</h4>

                <div class="row mb-4">
                    <div class="col-md-4">
                        <div class="card card-stat p-3 text-center">
                            <h6>Total Users</h6>
                            <h3 id="totalUsers">0</h3>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card card-stat p-3 text-center">
                            <h6>Total Exams</h6>
                            <h3 id="totalExams">0</h3>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card card-stat p-3 text-center">
                            <h6>Total Questions</h6>
                            <h3 id="totalQuestions">0</h3>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<script>
    const token = localStorage.getItem("token");
    if (!token) window.location.href = "../index.html";
    
    async function loadAdminDashboard() {
        try {
            // API থেকে data fetch
            const res = await fetch('http://localhost:5223/api/admin/dashboard', {
                headers: {
                    'Authorization': 'Bearer ' + localStorage.getItem('token') // যদি token লাগে
                }
            });

            if (!res.ok) throw new Error("Failed to fetch dashboard data");

            const data = await res.json();

            // Values set করা
            document.getElementById('totalUsers').innerText = data.totalUsers;
            document.getElementById('totalExams').innerText = data.totalExams;
            document.getElementById('totalQuestions').innerText = data.totalQuestions;

        } catch(err) {
            console.error("Error loading dashboard:", err);
            alert("Error loading dashboard: " + err.message);
        }
    }

    // Page load হলে run হবে
    window.addEventListener('DOMContentLoaded', loadAdminDashboard);

    function logout() {
        localStorage.clear();
        window.location.href = "/index.html";
    }
</script>
    

</body>
</html>
